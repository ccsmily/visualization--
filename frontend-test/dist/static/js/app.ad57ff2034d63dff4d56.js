webpackJsonp([1],{"+skl":function(t,e){},"7Otq":function(t,e,n){t.exports=n.p+"static/img/logo.2c1461d.png"},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"layout"},[r("Layout",[r("Header",[r("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[r("div",{staticClass:"layout-logo"},[r("img",{attrs:{src:n("7Otq")}})]),t._v(" "),r("div",{staticClass:"layout-nav"},[r("MenuItem",{attrs:{name:"1"}},[r("router-link",{attrs:{to:"/"}},[r("Icon",{attrs:{type:"ios-navigate"}}),t._v("首页")],1)],1),t._v(" "),r("MenuItem",{attrs:{name:"2"}},[r("router-link",{class:{"router-link-exact-active":t.searchActive},attrs:{to:"/searchPage"}},[r("Icon",{attrs:{type:"ios-keypad"}}),t._v("关键词搜索")],1)],1),t._v(" "),r("MenuItem",{attrs:{name:"3"}},[r("Icon",{staticClass:"help-btn",attrs:{type:"md-help-circle",size:"18"},on:{click:function(e){t.helpModal=!0}}})],1)],1)])],1),t._v(" "),r("Content",{style:{padding:"0 50px"}},[r("div",{staticClass:"flex-box"},[r("Breadcrumb",{style:{margin:"20px 0"}},[r("BreadcrumbItem",[t._v("WORDANCE")]),t._v(" "),r("BreadcrumbItem",[t._v(t._s(t.currentPage))])],1),t._v(" "),r("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入关键词"},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},[r("Icon",{staticClass:"search-btn",attrs:{slot:"suffix",type:"ios-search"},on:{click:t.goSearch},slot:"suffix"})],1)],1),t._v(" "),r("Card",[r("div",{staticStyle:{"min-height":"calc(100vh - 230px)"}},[r("router-view",{key:t.$route.fullPath,on:{"on-clear-search-key":t.clearSearchKey}})],1)])],1),t._v(" "),r("Footer",{staticClass:"layout-footer-center"},[t._v("wordance © more than you know")])],1),t._v(" "),r("Modal",{attrs:{title:"帮助文档",scollable:!0},on:{"on-ok":t.okModal,"on-cancel":t.cancelModal},model:{value:t.helpModal,callback:function(e){t.helpModal=e},expression:"helpModal"}},[r("p",[t._v("- 首页词云为各类型数据聚合。")]),t._v(" "),r("p",[t._v("- 点击词云里的词语可进入关键词搜索页。")]),t._v(" "),r("p",[t._v("- 右上角输入框中可以输入词语进行搜索，也可以进入关键词搜索页，效果和点词云的词语进入的情况一样。")]),t._v(" "),r("p",[t._v("- 关键词搜索页可以看关键词关联的词形成的力导图，同时可以看选中点对应的详细信息。")]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var i=n("VU/8")({data:function(){return{helpModal:!1,searchKey:""}},mounted:function(){this.searchKey=this.$route.query.key},methods:{okModal:function(){this.helpModal=!1},cancelModal:function(){this.helpModal=!1},goSearch:function(){if(!this.searchKey)return this.$Message.error("请输入搜索的关键词"),!1;this.$router.push({path:"/searchPage",query:{key:this.searchKey}})},clearSearchKey:function(){this.searchKey=""}},computed:{currentPage:function(){var t="";switch(this.$route.path){case"/":t="首页";break;case"/searchPage":t="关键词搜索"}return t},searchActive:function(){return this.$route.path.includes("/searchPage")}}},a,!1,function(t){n("Q5Wl")},"data-v-b2e9632c",null).exports,o=n("/ocq"),s=n("vwbq"),c=n("NobO"),l=n.n(c),u={name:"home",data:function(){return{carousel:0,groupList:[],initData:[],nodesObj:{},spinShow:!0}},watch:{carousel:{handler:function(t,e){t!==e&&this.drawRect()},deep:!0}},mounted:function(){var t=this;this.$emit("on-clear-search-key"),this.$axios("http://localhost:31000/getAllInfo").then(function(e){console.log(e),t.initData=e.data,e.data.forEach(function(e,n){t.nodesObj[e.id]=e});var n={};t.groupList=e.data.map(function(t,e){return n.hasOwnProperty(t.group)?-1:(n[t.group]=1,t.group)}).filter(function(t){return-1!==t}),t.$nextTick(function(){t.drawInit()})})},methods:{drawInit:function(){var t=this;this.drawRect(),this.groupList.forEach(function(e,n){t.drawWords(e,n)})},drawRect:function(){s.i(".tags").select("svg").remove();var t=s.i(".tags").append("svg"),e=this;t.attr("height",50).attr("width",""+80*this.groupList.length),t.append("g").attr("class","labels").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("g").data(e.groupList).join("g").attr("transform",function(t,e){return"translate("+70*e+", 0)"}).style("cursor","pointer").on("mouseenter",function(t,n){e.carousel!==n&&(e.carousel=n)}),t.select(".labels").selectAll("g").append("rect").attr("width",70).attr("height",40).attr("rx",10).attr("ry",10).attr("fill",function(t,n){return n===e.carousel?e.scale[t]:"#ddd"}),t.select(".labels").selectAll("g").append("text").text(function(t){return e.labelsObj[t]}).attr("fill","#333").attr("stroke","#fff").attr("stroke-width",0).style("font-size",function(t){return"16px"}).style("background","transparent").style("color","#333").style("font-family","Impact").attr("text-anchor","middle").attr("transform","translate(35, 25)")},drawWords:function(t,e){var n=this,r=s.g(s.h),a=this.initData.filter(function(e,n){return e.group===t}).map(function(t,e){return{id:t.id,size:t.size}}),i=a.map(function(t){return t.size}),o=Math.max.apply(null,i),c=Math.min.apply(null,i);console.log(a);var u=s.i(".svg-"+e).append("svg");u.attr("width",1e3).attr("height",500);var d=a.map(function(t){return{text:t.id,size:10+90*(t.size-c)/(o-c)}});l()().size([1e3,500]).words(d).padding(5).rotate(function(){return 45*Math.random()}).font("Impact").fontSize(function(t){return t.size}).on("end",function(){n.draw(u,d,this,r),e===n.groupList.length-1&&(n.spinShow=!1)}).start()},draw:function(t,e,n,r){t.append("g").attr("transform","translate("+n.size()[0]/2+","+n.size()[1]/2+")").selectAll("text").data(e).enter().append("text").attr("fill",function(t,e){return r(e)}).style("font-size",function(t){return t.size+"px"}).style("font-family","Impact").style("cursor","pointer").attr("text-anchor","middle").attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).text(function(t){return t.text}).on("click",function(t,e){window.open("http://www.baidu.com")})}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"tags"}),t._v(" "),n("Carousel",{staticClass:"carousel",attrs:{loop:"",autoplay:"","autoplay-speed":5e3},model:{value:t.carousel,callback:function(e){t.carousel=e},expression:"carousel"}},t._l(t.groupList,function(t,e){return n("CarouselItem",{key:e},[n("div",{staticClass:"svg",class:"svg-"+e})])}),1),t._v(" "),t.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},staticRenderFns:[]};var f=n("VU/8")(u,d,!1,function(t){n("h1qJ")},"data-v-8972b114",null).exports,h=n("mvHQ"),p=n.n(h),g={name:"search",data:function(){return{initData:[],nodesObj:{},height:600,width:600,spinShow:!1}},mounted:function(){this.$route.query.key?(this.spinShow=!0,this.getConnectedWords(this.$route.query.key)):this.$Message.info("请在搜索框输入关键词进行搜索")},methods:{getConnectedWords:function(t){var e=this;this.$axios.get("http://localhost:31000/getNodesByKeyword?keyword="+t).then(function(t){e.initData=t.data,e.drawInit(t.data),t.data.nodes.forEach(function(t,n){e.nodesObj[t.id]=t})})},drawInit:function(t){this.draw(t,!0),this.drawRect(t)},drag:function(t){return s.a().on("start",function(e){s.b.active||t.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(t){t.fx=s.b.x,t.fy=s.b.y}).on("end",function(e){s.b.active||t.alphaTarget(0),e.fx=null,e.fy=null})},draw:function(t,e){this.spinShow=!0;var n=t.links,r=t.nodes,a=this,i=s.f(r).force("link",s.d(n).id(function(t){return t.id})).force("charge",s.e()).force("center",s.c(this.width/2,this.height/2)),o=void 0;(o=e?s.i(".left").append("svg"):s.i("svg")).attr("viewBox",[0,0,this.width,this.height]);var c=o.append("g").attr("class","links").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(n).join("line").attr("stroke-width",function(t){return 1}),l=o.append("g").attr("class","nodes").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("circle").data(r).join("circle").attr("r",5).attr("fill",function(t){return a.scale[t.group]}).on("click",function(t){document.querySelector(".right").innerHTML="<span style='color: "+a.scale[t.group]+"'>["+t.group+"]["+t.index+"-"+t.id+"]"+p()(t)+"</span>"}).call(this.drag(i));l.append("title").text(function(t){return t.id}),i.on("tick",function(){c.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),l.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y})}),this.spinShow=!1},drawRect:function(t){var e=this,n={},r=t.nodes.map(function(t,e){return n.hasOwnProperty(t.group)?-1:(n[t.group]=1,t.group)}).filter(function(t){return-1!==t}),a=s.i("svg");a.append("g").attr("class","labels").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("g").data(r).join("g").attr("transform",function(t,e){return"translate(10, "+30*e+")"}).style("cursor","pointer").on("click",function(t,a){if(1===n[t]){s.i(this).select("rect").style("fill","#ddd"),s.i(this).select("text").style("fill","#333"),n[t]=-1;var i=r.filter(function(t,e){return 1===n[t]}),o=e.initData.nodes.filter(function(t,e){return-1!==i.indexOf(t.group)}),c=e.initData.links.filter(function(t,n){return-1!==i.indexOf(e.nodesObj[t.source.id].group)&&-1!==i.indexOf(e.nodesObj[t.target.id].group)});s.i(".links").remove(),s.i(".nodes").remove(),e.draw({links:c,nodes:o})}else{n[t]=1,s.i(this).select("rect").style("fill",e.scale[t]),s.i(this).select("text").style("fill","#fff");var l=r.filter(function(t,e){return 1===n[t]}),u=e.initData.nodes.filter(function(t,e){return-1!==l.indexOf(t.group)}),d=e.initData.links.filter(function(t,n){return-1!==l.indexOf(e.nodesObj[t.source.id].group)&&-1!==l.indexOf(e.nodesObj[t.target.id].group)});s.i(".links").remove(),s.i(".nodes").remove(),e.draw({links:d,nodes:u})}}),a.select(".labels").selectAll("g").append("rect").attr("width",30).attr("height",15).attr("rx",3).attr("ry",3).attr("fill",function(t){return e.scale[t]}),a.select(".labels").selectAll("g").append("text").text(function(t){return e.labelsObj[t]}).attr("stroke-width",0).style("font-size",function(t){return"10px"}).style("background","transparent").style("fill","#fff").style("font-family","Impact").attr("text-anchor","middle").attr("transform","translate(15, 11)")}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._m(0),this._v(" "),this.spinShow?e("Spin",{attrs:{size:"large",fix:""}}):this._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"search content"},[e("div",{staticClass:"left"}),this._v(" "),e("div",{staticClass:"right"},[this._v("点击左侧点出现点的具体信息")])])}]};var y=n("VU/8")(g,v,!1,function(t){n("t4OI")},"data-v-7b2026f8",null).exports;r.default.use(o.a);var m=new o.a({linkActiveClass:"link-active",routes:[{path:"/",name:"Home",component:f},{path:"/searchPage",name:"Search",component:y}]}),x=n("mtWM"),k=n.n(x),w=n("BTaQ"),b=n.n(w);n("+skl");r.default.use(b.a),r.default.prototype.$axios=k.a,r.default.config.productionTip=!1;r.default.prototype.scale={civilization:"#ff7f0e",economy:"#2ca02c",education:"#d62728",military:"#9467bd",polity:"#1f77b4",society:"#e377c2",sports:"#7f7f7f",other:"#bcbd22",8:"#17becf",9:"#1f77b4"},r.default.prototype.labelsObj={civilization:"人文",economy:"经济",education:"教育",military:"军事",polity:"政治",society:"社会",sports:"体育",other:"其他"},new r.default({el:"#app",router:m,components:{App:i},template:"<App/>"})},Q5Wl:function(t,e){},h1qJ:function(t,e){},t4OI:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ad57ff2034d63dff4d56.js.map