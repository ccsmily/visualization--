webpackJsonp([1],{"+skl":function(t,e){},"7Otq":function(t,e,n){t.exports=n.p+"static/img/logo.2c1461d.png"},HflK:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Layout",[a("Header",[a("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[a("div",{staticClass:"layout-logo"},[a("img",{attrs:{src:n("7Otq")}})]),t._v(" "),a("div",{staticClass:"layout-nav"},[a("MenuItem",{attrs:{name:"1"}},[a("router-link",{attrs:{to:"/"}},[a("Icon",{attrs:{type:"ios-navigate"}}),t._v("首页")],1)],1),t._v(" "),a("MenuItem",{attrs:{name:"2"}},[a("router-link",{class:{"router-link-exact-active":t.searchActive},attrs:{to:"/searchPage"}},[a("Icon",{attrs:{type:"ios-keypad"}}),t._v("关键词搜索")],1)],1),t._v(" "),a("MenuItem",{attrs:{name:"3"}},[a("Icon",{staticClass:"help-btn",attrs:{type:"md-help-circle",size:"18"},on:{click:function(e){t.helpModal=!0}}})],1)],1)])],1),t._v(" "),a("Content",{style:{padding:"0 50px"}},[a("div",{staticClass:"flex-box"},[a("Breadcrumb",{style:{margin:"20px 0"}},[a("BreadcrumbItem",[t._v("WORDANCE")]),t._v(" "),a("BreadcrumbItem",[t._v(t._s(t.currentPage))])],1),t._v(" "),a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入关键词"},on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},[a("Icon",{staticClass:"search-btn",attrs:{slot:"suffix",type:"ios-search"},on:{click:t.goSearch},slot:"suffix"})],1)],1),t._v(" "),a("Card",[a("div",{staticStyle:{"min-height":"calc(100vh - 230px)"}},[a("router-view",{key:t.$route.fullPath,on:{"on-clear-search-key":t.clearSearchKey,"on-get-search-key":t.getSearchKey}})],1)])],1),t._v(" "),a("Footer",{staticClass:"layout-footer-center"},[t._v("wordance © more than you know")])],1),t._v(" "),a("Modal",{attrs:{title:"帮助文档",scollable:!0},on:{"on-ok":t.okModal,"on-cancel":t.cancelModal},model:{value:t.helpModal,callback:function(e){t.helpModal=e},expression:"helpModal"}},[a("p",[t._v("- 首页词云为各类型数据聚合。")]),t._v(" "),a("p",[t._v("- 点击词云里的词语可进入关键词搜索页。")]),t._v(" "),a("p",[t._v("- 右上角输入框中可以输入词语进行搜索，也可以进入关键词搜索页，效果和点词云的词语进入的情况一样。")]),t._v(" "),a("p",[t._v("- 关键词搜索页可以看关键词关联的词形成的力导图，同时可以看选中点对应的详细信息。")]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var o=n("VU/8")({data:function(){return{helpModal:!1,searchKey:""}},mounted:function(){this.searchKey=this.$route.query.key},methods:{okModal:function(){this.helpModal=!1},cancelModal:function(){this.helpModal=!1},goSearch:function(){if(!this.searchKey)return this.$Message.error("请输入搜索的关键词"),!1;this.$router.push({path:"/searchPage",query:{key:this.searchKey}})},clearSearchKey:function(){this.searchKey=""},getSearchKey:function(){this.searchKey=this.$route.query.key}},computed:{currentPage:function(){var t="";switch(this.$route.path){case"/":t="首页";break;case"/searchPage":t="关键词搜索"}return t},searchActive:function(){return this.$route.path.includes("/searchPage")}}},r,!1,function(t){n("hW3q")},"data-v-4086e36b",null).exports,i=n("/ocq"),s=n("vwbq"),l=n("NobO"),c=n.n(l),u={name:"home",data:function(){return{carousel:0,groupList:[],initData:[],nodesObj:{},spinShow:!0}},watch:{carousel:{handler:function(t,e){t!==e&&this.drawRect()},deep:!0}},mounted:function(){var t=this;this.$emit("on-clear-search-key"),this.$axios("http://localhost:31000/getAllInfo").then(function(e){t.initData=e.data,e.data.forEach(function(e,n){t.nodesObj[e.id]=e});var n={};t.groupList=e.data.map(function(t,e){return n.hasOwnProperty(t.group)?-1:(n[t.group]=1,t.group)}).filter(function(t){return-1!==t}),t.$nextTick(function(){t.drawInit()})})},methods:{drawInit:function(){var t=this;this.drawRect(),this.groupList.forEach(function(e,n){t.drawWords(e,n)})},drawRect:function(){s.i(".tags").select("svg").remove();var t=s.i(".tags").append("svg"),e=this;t.attr("height",50).attr("width",""+80*this.groupList.length),t.append("g").attr("class","labels").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("g").data(e.groupList).join("g").attr("transform",function(t,e){return"translate("+70*e+", 0)"}).style("cursor","pointer").on("mouseenter",function(t,n){e.carousel!==n&&(e.carousel=n)}),t.select(".labels").selectAll("g").append("rect").attr("width",70).attr("height",40).attr("rx",10).attr("ry",10).attr("fill",function(t,n){return n===e.carousel?e.scale[t]:"#ddd"}),t.select(".labels").selectAll("g").append("text").text(function(t){return e.labelsObj[t]}).attr("fill","#333").attr("stroke","#fff").attr("stroke-width",0).style("font-size",function(t){return"16px"}).style("background","transparent").style("color","#333").style("font-family","Impact").attr("text-anchor","middle").attr("transform","translate(35, 25)")},drawWords:function(t,e){var n=this,a=s.g(s.h),r=this.initData.filter(function(e,n){return e.group===t}).map(function(t,e){return{id:t.id,size:t.size}}),o=r.map(function(t){return t.size}),i=Math.max.apply(null,o),l=Math.min.apply(null,o),u=s.i(".svg-"+e).append("svg");u.attr("width",1e3).attr("height",500);var d=r.map(function(t){return{text:t.id,size:10+90*(t.size-l)/(i-l)}});c()().size([1e3,500]).words(d).padding(5).rotate(function(){return 45*Math.random()}).font("Impact").fontSize(function(t){return t.size}).on("end",function(){n.draw(u,d,this,a),e===n.groupList.length-1&&(n.spinShow=!1)}).start()},draw:function(t,e,n,a){var r=this;t.append("g").attr("transform","translate("+n.size()[0]/2+","+n.size()[1]/2+")").selectAll("text").data(e).enter().append("text").attr("fill",function(t,e){return a(e)}).style("font-size",function(t){return t.size+"px"}).style("font-family","Impact").style("cursor","pointer").attr("text-anchor","middle").attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).text(function(t){return t.text}).on("click",function(t,e){r.$router.push({path:"/searchPage",query:{key:t.text}})})}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"tags"}),t._v(" "),n("Carousel",{staticClass:"carousel",attrs:{loop:"",autoplay:"","autoplay-speed":5e3},model:{value:t.carousel,callback:function(e){t.carousel=e},expression:"carousel"}},t._l(t.groupList,function(t,e){return n("CarouselItem",{key:e},[n("div",{staticClass:"svg",class:"svg-"+e})])}),1),t._v(" "),t.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},staticRenderFns:[]};var h=n("VU/8")(u,d,!1,function(t){n("HflK")},"data-v-65f7860c",null).exports,f={name:"search",data:function(){return{initData:[],nodesObj:{},height:600,width:600,spinShow:!1,newsList:[],keyClicked:"",groupClicked:"",spinRightShow:!1,moreContentModal:{}}},mounted:function(){this.$route.query.key?(this.spinShow=!0,this.$emit("on-get-search-key"),this.getConnectedWords(this.$route.query.key)):this.$Message.info("请在搜索框输入关键词进行搜索")},methods:{getConnectedWords:function(t){var e=this;this.$axios.get("http://localhost:31000/getNodesByKeyword?keyword="+t).then(function(t){e.initData=t.data,e.drawInit(t.data),t.data.nodes.forEach(function(t,n){e.nodesObj[t.id]=t})})},getDetail:function(t,e){var n=this;this.spinRightShow=!0,this.keyClicked=t,this.groupClicked=e,this.$axios.get("http://localhost:31000/getInfoByKeyword?keyword="+t+"&label="+e).then(function(t){n.newsList=t.data,n.spinRightShow=!1})},getOpinion:function(t){return t.filter(function(t,e){return t[2]&&t[2].length>=4})},showMoreContent:function(t){this.$set(this.moreContentModal,"show",!0),this.$set(this.moreContentModal,"title",t.title),this.$set(this.moreContentModal,"content",t.content.replace(/\\n/g,"<br>"))},okModal:function(){this.moreContentModal={},this.$set(this.moreContentModal,"show",!1)},cancelModal:function(){this.moreContentModal={},this.$set(this.moreContentModal,"show",!1)},drawInit:function(t){this.draw(t,!0),this.drawRect(t)},drag:function(t){return s.a().on("start",function(e){s.b.active||t.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(t){t.fx=s.b.x,t.fy=s.b.y}).on("end",function(e){s.b.active||t.alphaTarget(0),e.fx=null,e.fy=null})},draw:function(t,e){this.spinShow=!0;var n=t.links,a=t.nodes,r=this,o=s.f(a).force("link",s.d(n).id(function(t){return t.id})).force("charge",s.e()).force("center",s.c(this.width/2,this.height/2)),i=void 0;(i=e?s.i(".left").append("svg"):s.i("svg")).attr("viewBox",[0,0,this.width,this.height]);var l=i.append("g").attr("class","links").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(n).join("line").attr("stroke-width",function(t){return 1}),c=i.append("g").attr("class","nodes").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("circle").data(a).join("circle").attr("r",5).attr("fill",function(t){return r.scale[t.group]}).on("click",function(t){r.getDetail(t.id,t.group)}).call(this.drag(o));c.append("title").text(function(t){return t.id}),o.on("tick",function(){l.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),c.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y})}),this.spinShow=!1},drawRect:function(t){var e=this,n={},a=t.nodes.map(function(t,e){return n.hasOwnProperty(t.group)?-1:(n[t.group]=1,t.group)}).filter(function(t){return-1!==t}),r=s.i("svg");r.append("g").attr("class","labels").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("g").data(a).join("g").attr("transform",function(t,e){return"translate(10, "+30*e+")"}).style("cursor","pointer").on("click",function(t,r){if(1===n[t]){s.i(this).select("rect").style("fill","#ddd"),s.i(this).select("text").style("fill","#333"),n[t]=-1;var o=a.filter(function(t,e){return 1===n[t]}),i=e.initData.nodes.filter(function(t,e){return-1!==o.indexOf(t.group)}),l=e.initData.links.filter(function(t,n){return-1!==o.indexOf(e.nodesObj[t.source.id].group)&&-1!==o.indexOf(e.nodesObj[t.target.id].group)});s.i(".links").remove(),s.i(".nodes").remove(),e.draw({links:l,nodes:i})}else{n[t]=1,s.i(this).select("rect").style("fill",e.scale[t]),s.i(this).select("text").style("fill","#fff");var c=a.filter(function(t,e){return 1===n[t]}),u=e.initData.nodes.filter(function(t,e){return-1!==c.indexOf(t.group)}),d=e.initData.links.filter(function(t,n){return-1!==c.indexOf(e.nodesObj[t.source.id].group)&&-1!==c.indexOf(e.nodesObj[t.target.id].group)});s.i(".links").remove(),s.i(".nodes").remove(),e.draw({links:d,nodes:u})}}),r.select(".labels").selectAll("g").append("rect").attr("width",30).attr("height",15).attr("rx",3).attr("ry",3).attr("fill",function(t){return e.scale[t]}),r.select(".labels").selectAll("g").append("text").text(function(t){return e.labelsObj[t]}).attr("stroke-width",0).style("font-size",function(t){return"10px"}).style("background","transparent").style("fill","#fff").style("font-family","Impact").attr("text-anchor","middle").attr("transform","translate(15, 11)")}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"search content"},[n("div",{staticClass:"left"}),t._v(" "),n("div",{staticClass:"right"},[t.spinRightShow?n("Spin",{attrs:{size:"large"}}):t._e(),t._v(" "),0===t.newsList.length?n("p",{staticClass:"tip"},[t._v("点击左侧点出现点的具体信息")]):t._e(),t._v(" "),t.newsList.length>0?n("div",[n("div",{staticClass:"tags hidden"},[n("Tag",{staticClass:"tag",class:t.groupClicked},[t._v(t._s(t.keyClicked))]),t._v(" "),n("Tag",{staticClass:"tag",class:t.groupClicked},[t._v(t._s(t.labelsObj[t.groupClicked]))]),t._v(" "),n("span",{staticClass:"more"},[t._v(">>更多文章")])],1),t._v(" "),t._l(t.newsList,function(e,a){return n("div",{key:a,staticClass:"card"},[a<2?n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))]),t._v(" "),n("p",{staticClass:"author"},[t._v(t._s(e.source)+"  "+t._s(e.author))]),t._v(" "),t._l(t.getOpinion(e.opinion),function(e,a){return n("p",{key:a},[a<4?n("Alert",[t._v(t._s(e[0])+": "+t._s(e[2]))]):t._e()],1)}),t._v(" "),0===t.getOpinion(e.opinion).length?n("p",[n("Alert",{attrs:{type:"warning"}},[t._v("暂无观点内容")])],1):t._e(),t._v(" "),n("p",{staticClass:"hidden"},[n("span",{staticClass:"more",on:{click:function(n){return t.showMoreContent(e)}}},[t._v(">>更多内容")])])],2):t._e()],1)})],2):t._e()],1)]),t._v(" "),n("Modal",{staticClass:"contentModal",attrs:{title:t.moreContentModal.title,scollable:!0},on:{"on-ok":t.okModal,"on-cancel":t.cancelModal},model:{value:t.moreContentModal.show,callback:function(e){t.$set(t.moreContentModal,"show",e)},expression:"moreContentModal.show"}},[n("div",{domProps:{innerHTML:t._s(t.moreContentModal.content)}}),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary"}},[t._v("确定")])],1)]),t._v(" "),t.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},staticRenderFns:[]};var g=n("VU/8")(f,p,!1,function(t){n("m2BG")},"data-v-343771fb",null).exports;a.default.use(i.a);var v=new i.a({linkActiveClass:"link-active",routes:[{path:"/",name:"Home",component:h},{path:"/searchPage",name:"Search",component:g}]}),y=n("mtWM"),m=n.n(y),k=n("BTaQ"),_=n.n(k);n("+skl");a.default.use(_.a),a.default.prototype.$axios=m.a,a.default.config.productionTip=!1;a.default.prototype.scale={civilization:"#ff7f0e",economy:"#2ca02c",education:"#d62728",military:"#9467bd",polity:"#1f77b4",society:"#e377c2",sports:"#7f7f7f",other:"#bcbd22"},a.default.prototype.labelsObj={civilization:"人文",economy:"经济",education:"教育",military:"军事",polity:"政治",society:"社会",sports:"体育",other:"其他"},new a.default({el:"#app",router:v,components:{App:o},template:"<App/>"})},hW3q:function(t,e){},m2BG:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.210ece80bd2caf641765.js.map